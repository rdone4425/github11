# GitHub同步工具 - 增强配置向导指南

## 🎯 功能概述

新的交互式配置向导提供了多种配置模式，让用户可以根据自己的需求和技术水平选择最合适的配置方式。

## 🚀 配置向导模式

### 1. 快速配置（推荐新手）
- **特点**: 使用预设模板，只需输入基本信息
- **适用**: 新手用户，快速上手
- **配置项**: GitHub凭据 + 模板选择
- **时间**: 2-3分钟

```
🚀 快速配置向导
================

🔑 GitHub账户配置
• 自动验证用户名格式
• 自动验证令牌格式
• 实时测试GitHub连接

📋 选择配置模板：
1) OpenWrt路由器配置同步
2) 开发环境配置同步  
3) 服务器配置备份
4) 自定义配置
```

### 2. 标准配置（推荐）
- **特点**: 逐步配置所有选项，提供详细说明
- **适用**: 大多数用户
- **配置项**: 完整配置流程
- **时间**: 5-8分钟

```
⚙️ 标准配置向导
===============

📁 同步路径配置
• 路径存在性验证
• 智能默认值建议
• 详细格式说明

⏱️ 监控设置配置
• 轮询间隔优化建议
• 日志级别详细说明

🔧 高级选项配置
• 自动提交设置
• 文件过滤规则
• 提交消息模板
```

### 3. 高级配置（专家用户）
- **特点**: 配置所有高级选项，包括网络和性能优化
- **适用**: 专家用户，需要精细控制
- **配置项**: 全部配置选项
- **时间**: 10-15分钟

```
🔧 高级配置向导
===============

🌐 网络设置配置
• HTTP超时设置
• SSL证书验证
• 代理服务器配置
• 重试机制设置

🔧 高级选项
• 文件大小限制
• 高级文件过滤
• 性能优化参数
```

### 4. 从模板创建
- **特点**: 选择预设配置模板，快速适配常见场景
- **适用**: 有特定使用场景的用户
- **配置项**: 模板 + 基本定制
- **时间**: 3-5分钟

## 📋 预设配置模板

### 🏠 家庭路由器配置
```yaml
同步内容:
  - /etc/config/* (系统配置)
  - /etc/firewall.user (防火墙规则)
  - /etc/crontabs/root (定时任务)

特点:
  - 轮询间隔: 60秒 (低频)
  - 日志级别: INFO
  - 自动提交: 启用
  - 文件过滤: 基础过滤
```

### 🏢 企业路由器配置
```yaml
同步内容:
  - /etc/config/* (系统配置)
  - /etc/firewall.user (防火墙规则)
  - /etc/dropbear (SSH配置)
  - /etc/uhttpd (Web配置)
  - /etc/dnsmasq.conf (DNS配置)

特点:
  - 轮询间隔: 30秒 (标准)
  - 日志级别: INFO
  - 自动提交: 启用
  - 文件过滤: 增强过滤
  - 文件大小: 2MB限制
```

### 💻 开发工作站配置
```yaml
同步内容:
  - ~/.bashrc, ~/.profile (Shell配置)
  - ~/.vimrc, ~/.tmux.conf (编辑器配置)
  - ~/.gitconfig (Git配置)
  - ~/scripts/ (自定义脚本)

特点:
  - 轮询间隔: 10秒 (高频)
  - 日志级别: DEBUG
  - 自动提交: 启用
  - 文件过滤: 开发环境优化
  - 文件大小: 5MB限制
```

### 🖥️ 生产服务器配置
```yaml
同步内容:
  - /etc/nginx/ (Web服务器配置)
  - /etc/systemd/system/ (系统服务)
  - /root/scripts/ (管理脚本)
  - /etc/crontab (系统定时任务)

特点:
  - 轮询间隔: 300秒 (低频)
  - 日志级别: WARN
  - 自动提交: 启用
  - 文件过滤: 生产环境优化
  - 提交消息: 包含主机名和时间戳
```

## 🔧 智能功能特性

### 输入验证和格式检查
- **GitHub用户名**: 自动验证格式规范
- **GitHub令牌**: 识别classic和fine-grained token
- **路径验证**: 检查本地路径是否存在
- **网络测试**: 实时测试GitHub API连接

### 智能默认值
- **仓库名称**: 根据模板自动建议
- **分支名称**: 默认使用main分支
- **轮询间隔**: 根据使用场景优化
- **文件过滤**: 根据环境类型预设

### 配置文件管理
- **备份机制**: 自动备份现有配置
- **版本信息**: 记录配置生成时间和方式
- **详细注释**: 自动生成配置说明
- **格式化输出**: 结构化的配置文件

## 🎮 使用流程

### 首次配置
```bash
# 运行GitHub同步工具
github-sync

# 首次运行会自动提示配置向导
1) 运行快速设置向导（推荐）
2) 手动编辑配置文件
3) 查看配置示例
4) 进入主菜单
```

### 修改现有配置
```bash
# 在主菜单中选择
11) 快速设置向导 [w]

# 或者直接运行
github-sync config
```

### 编辑特定配置项
```
✏️ 编辑现有配置
===============

选择要修改的配置项:
1) GitHub凭据
2) 同步路径  
3) 监控设置
4) 高级选项
5) 完整重新配置
6) 取消
```

## 🔍 配置验证

### 自动测试功能
- **GitHub连接**: 验证用户名和令牌
- **API权限**: 检查仓库访问权限
- **路径检查**: 验证本地路径可访问性
- **配置语法**: 验证配置文件格式

### 错误处理
- **友好提示**: 清晰的错误信息和解决建议
- **重试机制**: 允许重新输入错误的配置
- **回滚功能**: 配置失败时恢复原有配置

## 📊 配置摘要

配置完成后会显示详细摘要：
```
🎉 配置向导完成！

📋 配置摘要:
  • GitHub用户: username
  • 轮询间隔: 30秒
  • 日志级别: INFO
  • 同步路径: 3个
  • 自动提交: true

是否现在启动同步服务？[Y/n]:
```

## 🚀 快速开始示例

### 场景1: OpenWrt路由器用户
```bash
# 1. 运行安装命令
bash <(curl -Ls https://raw.githubusercontent.com/rdone4425/github11/main/system-check.sh)

# 2. 选择快速配置
# 3. 输入GitHub用户名和令牌
# 4. 选择"OpenWrt路由器配置同步"模板
# 5. 确认配置并启动服务
```

### 场景2: 开发者用户
```bash
# 1. 运行github-sync
# 2. 选择标准配置
# 3. 详细配置同步路径
# 4. 设置高频监控(10秒)
# 5. 启用DEBUG日志
```

这个增强的配置向导让用户可以根据自己的需求和技术水平，快速、准确地完成GitHub同步工具的配置！
